"use strict";(self.webpackChunkrahulsrma_26_github_io=self.webpackChunkrahulsrma_26_github_io||[]).push([[6473],{5928:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>o,default:()=>u,frontMatter:()=>t,metadata:()=>a,toc:()=>l});var r=n(4848),i=n(8453);const t={title:"Passwordless SSH and Jump servers",comments:!0,date:new Date("2020-09-09T00:00:00.000Z"),tags:["linux","network"],description:"Learn how to securely connect to remote servers using SSH without entering a password every time. This tutorial covers SSH key authentication, setting up SSH config files, managing multiple servers, and configuring a jump server for secure remote access. Enhance your server login security with our step-by-step guide.",keywords:["SSH tutorial","SSH without password","SSH key authentication","Setting up SSH config","SSH jump server setup","Secure remote login","SSH key generation","Managing multiple SSH servers","ProxyJump SSH","SSH config file guide","SSH login security","Remote server access","SSH jump host configuration","Copy SSH key to server"]},o=void 0,a={id:"linux/ssh-jump/index",title:"Passwordless SSH and Jump servers",description:"Learn how to securely connect to remote servers using SSH without entering a password every time. This tutorial covers SSH key authentication, setting up SSH config files, managing multiple servers, and configuring a jump server for secure remote access. Enhance your server login security with our step-by-step guide.",source:"@site/docs/linux/01-ssh-jump/index.md",sourceDirName:"linux/01-ssh-jump",slug:"/linux/ssh-jump/",permalink:"/docs/linux/ssh-jump/",draft:!1,unlisted:!1,tags:[{inline:!0,label:"linux",permalink:"/docs/tags/linux"},{inline:!0,label:"network",permalink:"/docs/tags/network"}],version:"current",lastUpdatedAt:1725042718e3,frontMatter:{title:"Passwordless SSH and Jump servers",comments:!0,date:"2020-09-09T00:00:00.000Z",tags:["linux","network"],description:"Learn how to securely connect to remote servers using SSH without entering a password every time. This tutorial covers SSH key authentication, setting up SSH config files, managing multiple servers, and configuring a jump server for secure remote access. Enhance your server login security with our step-by-step guide.",keywords:["SSH tutorial","SSH without password","SSH key authentication","Setting up SSH config","SSH jump server setup","Secure remote login","SSH key generation","Managing multiple SSH servers","ProxyJump SSH","SSH config file guide","SSH login security","Remote server access","SSH jump host configuration","Copy SSH key to server"]},sidebar:"docsSidebar",previous:{title:"Linux Misc",permalink:"/docs/linux/"},next:{title:"Mounting SMB share on Debian",permalink:"/docs/linux/smb-mount/"}},c={},l=[{value:"Checking",id:"checking",level:2},{value:"Generating",id:"generating",level:2},{value:"Authorizing",id:"authorizing",level:2},{value:"Managing multiple servers",id:"managing-multiple-servers",level:2},{value:"Jump server",id:"jump-server",level:2}];function h(e){const s={a:"a",code:"code",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.p,{children:"Secure Shell (SSH) is a cryptographic network protocol primarily used to do remote command-line, login, and remote command execution. In this post, we will learn how to connect to a remote machine with ssh without entering a password every time. We will also learn how to set up your ssh config for jump servers."}),"\n",(0,r.jsx)(s.p,{children:"We can use SSH keys to log in to a remote machine instead of a password. SSH keys provide a more secure way of logging into a server than using a password alone. A password can eventually be cracked with a brute force attack, SSH keys are nearly impossible to decipher by brute force alone."}),"\n",(0,r.jsx)(s.p,{children:"SSH keys come in a pair: a public and a private key. You can place the public key on any server, and then unlock it by connecting to it with a client that already has the private key. When the two matches up, the system unlocks without the need for a password."}),"\n",(0,r.jsx)(s.p,{children:"In this scenario, we are trying to connect to a server machine using our laptop (called the host)."}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.img,{alt:"host-server",src:n(2784).A+"",width:"672",height:"240"})}),"\n",(0,r.jsx)(s.h2,{id:"checking",children:"Checking"}),"\n",(0,r.jsx)(s.p,{children:"First, we need to check whether the host already has a generated ssh key or not."}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sh",children:"ls ~/.ssh/id_rsa*\n"})}),"\n",(0,r.jsxs)(s.p,{children:["If you see these two files ",(0,r.jsx)(s.code,{children:"id_rsa"})," and ",(0,r.jsx)(s.code,{children:"id_rsa.pub"}),". Then it may have been generated before."]}),"\n",(0,r.jsx)(s.h2,{id:"generating",children:"Generating"}),"\n",(0,r.jsxs)(s.p,{children:["If you don't have these files or ",(0,r.jsx)(s.code,{children:".ssh"})," directory in your home then you need to generate a key first."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sh",children:"ssh-keygen -t rsa\n"})}),"\n",(0,r.jsx)(s.p,{children:"You can increase security even more by protecting the private key with a passphrase."}),"\n",(0,r.jsxs)(s.p,{children:["Now, if you have left things to default, it will generate these two files in ",(0,r.jsx)(s.code,{children:"~/.ssh"}),":"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Private key (id_rsa)"}),"\n",(0,r.jsx)(s.li,{children:"Public key (id_rsa.pub)"}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"authorizing",children:"Authorizing"}),"\n",(0,r.jsxs)(s.p,{children:["Now to get authorized using keys we need to copy the content of our Public key to the server.\nLet's assume our server ip is ",(0,r.jsx)(s.code,{children:"192.168.0.123"})," and the username is ",(0,r.jsx)(s.code,{children:"user"}),"."]}),"\n",(0,r.jsxs)(s.p,{children:["We can use the ",(0,r.jsx)(s.code,{children:"ssh-copy-id"})," command to copy the contents of our public key to the server."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sh",children:"ssh-copy-id user@192.168.0.123\n"})}),"\n",(0,r.jsxs)(s.p,{children:["If you have multiple ids then you can specify which id to copy by using ",(0,r.jsx)(s.code,{children:"-i"})," option."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sh",children:"ssh-copy-id -i ~/.ssh/id_rsa user@192.168.0.123\n"})}),"\n",(0,r.jsx)(s.p,{children:"Once you entered the password for one more time, you can now log in to the server without a password."}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sh",children:"ssh user@192.168.0.123\n"})}),"\n",(0,r.jsx)(s.h2,{id:"managing-multiple-servers",children:"Managing multiple servers"}),"\n",(0,r.jsx)(s.p,{children:"Managing multiple remote servers requires a very good memory to remember connection options like usernames, remote addresses, ports, and further details. So you may need to document all the details for each server."}),"\n",(0,r.jsxs)(s.p,{children:["The SSH config file can simplify SSH connections. Create or edit ",(0,r.jsx)(s.code,{children:"~/.ssh/config"})," file and add"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-txt",metastring:'title="~/.ssh/config"',children:"Host web\n    HostName 192.168.0.123\n    User user\n"})}),"\n",(0,r.jsx)(s.p,{children:"Now you can just directly connect using the alias."}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sh",children:"ssh web\n"})}),"\n",(0,r.jsx)(s.p,{children:"You can also specify port if a ssh connection requires it."}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-txt",metastring:'title="~/.ssh/config"',children:"Host web\n    HostName 192.168.0.123\n    User user\n\nHost db\n    HostName 192.168.0.124\n    User user\n    Port 2222\n"})}),"\n",(0,r.jsx)(s.h2,{id:"jump-server",children:"Jump server"}),"\n",(0,r.jsx)(s.p,{children:"A jump host (also known as a jump server) is an intermediary host or an SSH gateway to a remote network, through which a connection can be made to another host in a dissimilar security zone, for example, a demilitarized zone (DMZ). It bridges two dissimilar security zones and offers controlled access between them."}),"\n",(0,r.jsx)(s.p,{children:"A classic scenario is connecting from your laptop to a server in your company\u2019s internal network, which is highly secured with firewalls to a DMZ. You may access it via a jump host."}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.img,{alt:"host-jump-main",src:n(4797).A+"",width:"672",height:"240"})}),"\n",(0,r.jsx)(s.p,{children:"Usually you can ssh it directly"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sh",children:"ssh -J jumpuser@jumpserver:port username@server:port\n"})}),"\n",(0,r.jsx)(s.p,{children:"We can specify a jump server as a proxy"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-txt",metastring:'title="~/.ssh/config"',children:"Host jump_server\n    User jump_user_name\n    Hostname jump.example.com\n    IdentityFile ~/.ssh/id_rsa\n\nHost main_server_behind_jump\n    User main_user_name\n    Hostname main.example.com\n    IdentityFile ~/.ssh/id_rsa\n    ProxyJump jump_server\n"})}),"\n",(0,r.jsxs)(s.p,{children:["If you need to copy the id to through proxy then you use ",(0,r.jsx)(s.code,{children:"-o"})," option."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sh",children:"ssh-copy-id -o ProxyJump=juser@jhost:jport user@host\n"})}),"\n",(0,r.jsxs)(s.p,{children:["You can find more information about the config file ",(0,r.jsx)(s.a,{href:"https://www.ssh.com/ssh/config/",children:"here"}),"."]})]})}function u(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},4797:(e,s,n)=>{n.d(s,{A:()=>r});const r=n.p+"assets/images/host-jump-main-b0887d3e4f6fd30ddad8d8fa3cc1e3ca.svg"},2784:(e,s,n)=>{n.d(s,{A:()=>r});const r=n.p+"assets/images/host-server-087bd3a9fbce016d1884f596ad6bf816.svg"},8453:(e,s,n)=>{n.d(s,{R:()=>o,x:()=>a});var r=n(6540);const i={},t=r.createContext(i);function o(e){const s=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),r.createElement(t.Provider,{value:s},e.children)}}}]);